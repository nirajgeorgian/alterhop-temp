{"version":3,"sources":["../../src/util/middleware.app.js"],"names":["Raven","require","config","install","connectMiddleware","app","use","requestHandler","errorHandler","onError","err","req","res","next","statusCode","end","sentry","bodyParser","json","verify"],"mappings":";;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA,IAAIA,QAAQC,QAAQ,OAAR,CAAZ;AACAD,MAAME,MAAN,CAAa,4DAAb,EAA2EC,OAA3E;;AAEO,IAAMC,gDAAoB,SAApBA,iBAAoB,MAAO;AACtC;AACAC,MAAIC,GAAJ,CAAQN,MAAMO,cAAN,EAAR;AACA;AACAF,MAAIC,GAAJ,CAAQN,MAAMQ,YAAN,EAAR;AACAH,MAAIC,GAAJ,CAAQ,SAASG,OAAT,CAAiBC,GAAjB,EAAsBC,GAAtB,EAA2BC,GAA3B,EAAgCC,IAAhC,EAAsC;AAC1C;AACA;AACAD,QAAIE,UAAJ,GAAiB,GAAjB;AACAF,QAAIG,GAAJ,CAAQH,IAAII,MAAJ,GAAa,IAArB;AACH,GALD;AAMAX,MAAIC,GAAJ,CAAQW,qBAAWC,IAAX,EAAR;AACAb,MAAIC,GAAJ,CAAQ,4BAAR;AACAD,MAAIC,GAAJ,CAAQ,sBAAO,UAAP,CAAR;AACAD,MAAIC,GAAJ,CAAQa,kBAAR;AACD,CAfM","file":"middleware.app.js","sourcesContent":["import bodyParser from 'body-parser'\nimport compression from 'compression'\nimport morgan from 'morgan'\nimport { verify } from './authverify.middleware'\nvar Raven = require('raven')\nRaven.config('https://918abef9f4ef486f97c14ff6176058a8@sentry.io/1282185').install()\n\nexport const connectMiddleware = app => {\n  // The request handler must be the first middleware on the app\n  app.use(Raven.requestHandler());\n  // The error handler must be before any other error middleware\n  app.use(Raven.errorHandler());\n  app.use(function onError(err, req, res, next) {\n      // The error id is attached to `res.sentry` to be returned\n      // and optionally displayed to the user for support.\n      res.statusCode = 500;\n      res.end(res.sentry + '\\n');\n  });\n  app.use(bodyParser.json())\n  app.use(compression())\n  app.use(morgan('combined'))\n  app.use(verify)\n}\n"]}